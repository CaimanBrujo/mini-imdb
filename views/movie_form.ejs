<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title><%= title %></title>
    <link rel="stylesheet" href="/css/styles.css" />
  </head>
  <body>
    <div class="container">
      <header class="navbar">
        <a href="/">Home</a>
        <a href="/genres">Genres</a>
        <a href="/movies">Movies</a>
      </header>

      <h1><%= title %></h1>

      <form method="POST" action="<%= action %>">
        <label for="title">Title</label>
        <input type="text" id="title" name="title" value="<%= movie?.title || '' %>" required />

        <label for="description">Description</label>
        <textarea id="description" name="description" rows="3"><%= movie?.description || '' %></textarea>

        <label for="release_year">Release Year</label>
        <input type="number" id="release_year" name="release_year" value="<%= movie?.release_year || '' %>" required />

        <label for="genre_id">Genre</label>
        <select id="genre_id" name="genre_id" required>
          <option value="">-- Select a genre --</option>
          <% genres.forEach(genre => { %>
            <option value="<%= genre.id %>" <%= movie?.genre_id == genre.id ? 'selected' : '' %>>
              <%= genre.name %>
            </option>
          <% }) %>
        </select>

        <button type="submit" class="btn"><%= buttonText %></button>
      </form>

      <% if (movie?.id) { %>
        <form method="POST" action="/movies/<%= movie.id %>/delete" style="margin-top:1em;">
          <button type="submit" class="btn danger" onclick="return confirm('Are you sure you want to delete this movie?')">
            üóëÔ∏è Delete Movie
          </button>
        </form>
      <% } %>

      <p><a href="/movies" class="btn">‚Üê Back to Movies</a></p>
    </div>
  </body>
</html>
